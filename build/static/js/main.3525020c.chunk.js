(window["webpackJsonpreact-google-books-api-search"]=window["webpackJsonpreact-google-books-api-search"]||[]).push([[0],{23:function(e,t,n){},45:function(e,t,n){e.exports=n(98)},97:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(37),l=n.n(o),c=(n(23),n(19)),s=n(2),i=n(8),u=n(9),m=n(11),h=n(10),p=n(12),f=n(38),d=n(15),b=n(39),k=n.n(b),v=function(e){return Object(d.usePromiseTracker)().promiseInProgress&&r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(k.a,{type:"Oval",color:"#F88C04",height:100,width:100}))},g=["all","books","magazines"],E=["partial","full","free-ebooks","paid-ebooks","ebooks"],y="AIzaSyCIxIIcpTwWrV5HmCj_q4AWZRAqD7y6CFI",T="https://www.googleapis.com/books/v1/volumes",j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:"",printType:"all",bookType:"full"},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(f.a)({},a,r))},n.fetchBooks=function(){var e="".concat(T,"?key=").concat(y,"&langRestrict=en&maxResults=40&orderBy=relevance&q=").concat(n.state.searchTerm,"&filter=").concat(n.state.bookType,"&printType=").concat(n.state.printType);Object(d.trackPromise)(fetch(e).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later.");return e}).then(function(e){return e.json()}).then(function(e){n.props.updateResults(e)}).catch(function(e){n.setState({error:e.message})}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.fetchBooks()}},{key:"render",value:function(){var e=this,t=E.map(function(e,t){return r.a.createElement("option",{value:e,key:e},e)}),n=g.map(function(e,t){return r.a.createElement("option",{value:e,key:e},e)});return r.a.createElement("div",{className:"header_content"},r.a.createElement("h1",null,"Search Books"),r.a.createElement("form",{id:"form",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("legend",null),r.a.createElement("label",{htmlFor:"searchTerm"},r.a.createElement("input",{type:"text",name:"searchTerm",id:"searchTerm",required:!0,"aria-required":"true",placeholder:"",value:this.state.searchTerm,onChange:this.handleChange})),r.a.createElement("button",{id:"search"},"search"),r.a.createElement("div",{className:"select-container"},r.a.createElement("label",{htmlFor:"printType"},"Print Type"," ",r.a.createElement("select",{id:"printType",name:"printType",value:this.state.printType,onChange:this.handleChange},n)),r.a.createElement("label",{htmlFor:"bookType"},"Book Type"," ",r.a.createElement("select",{id:"bookType",name:"bookType",value:this.state.bookType,onChange:this.handleChange},t)))),r.a.createElement("p",{id:"error-message",className:"error-message"},this.state.error),r.a.createElement(v,null))}}]),t}(r.a.Component),w=n(40),O=n.n(w),I=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.title,n=this.props.name;return r.a.createElement("div",{className:"item-buttons"},this.props.link?r.a.createElement("button",{id:"a",onClick:function(){var a={name:n,title:t};O.a.post("http://localhost:3001/",a),window.open(e.props.link,"_blank")}},"view"):r.a.createElement("em",null,r.a.createElement("small",null,"no link")))}}]),t}(r.a.Component),R=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.name,t=this.props.book,n="https://via.placeholder.com/150",a=function(e){var t=e.volumeInfo&&e.volumeInfo.authors,n=[];if(!t)return"N/A";return t.map(function(e,t){return n.push(e)}),n.join(", ")}(t),o=function(e){var t=e.volumeInfo&&e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.smallThumbnail;return t||n}(t),l=function(e){var t=e.saleInfo.retailPrice&&e.saleInfo.retailPrice.amount,n=e.saleInfo.retailPrice&&e.saleInfo.retailPrice.currencyCode;if(!t)return"N/A";return"".concat(t," ").concat(n)}(t);return r.a.createElement("li",{className:"item"},r.a.createElement("div",{className:"item-header"},r.a.createElement("div",{className:"item-subhead"},r.a.createElement("h3",null,t.volumeInfo.title),r.a.createElement("br",null),"Author: ",a,r.a.createElement("br",null),"Price: ",l),r.a.createElement(I,{link:t.saleInfo.buyLink,title:t.volumeInfo.title,name:e})),r.a.createElement("div",{className:"item-description-container"},r.a.createElement("div",{className:"item-description"},r.a.createElement("img",{src:o,alt:o?t.volumeInfo.title:"no-image"}),t.volumeInfo.description)))}}]),t}(r.a.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.searchResults,t=[];return e[0][0]&&e[0][0].totalItems&&e[0][0].items&&(t=e[0][0].items.map(function(t,n){return r.a.createElement(R,{key:n,book:t,name:e[1]})})),r.a.createElement("section",{id:"results"},r.a.createElement("h2",null,"Search Results"),r.a.createElement("ul",{id:"results-list",className:"item-list"},t.length?r.a.createElement(r.a.Fragment,null,t):"No books found!"))}}]),t}(r.a.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{id:"back-to-top",className:"back-to-top",onClick:this.props.goBackToTop,style:{display:this.props.showBackToTop?"block":"none"}},"back to top")}}]),t}(r.a.Component),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={searchResults:[],showBackToTop:!1},n.handleScroll=function(){0===window.scrollY?n.setState({showBackToTop:!1}):n.setState({showBackToTop:!0})},n.updateResults=function(e){n.setState({searchResults:[e]}),n.scrollToRef(n.ref_SearchResults)},n.scrollToRef=function(e){window.scrollTo({top:e.current.offsetTop,behavior:"smooth"})},n.ref_SearchForm=r.a.createRef(),n.ref_SearchResults=r.a.createRef(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props.location.state.res;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{id:"head",ref:this.ref_SearchForm},r.a.createElement(j,{updateResults:function(t){return e.updateResults(t)}})),r.a.createElement("main",{id:"main",ref:this.ref_SearchResults},this.state.searchResults.length>0?r.a.createElement(S,{searchResults:[this.state.searchResults,t]}):null),r.a.createElement("footer",null,this.state.searchResults.length>0?r.a.createElement(C,{goBackToTop:function(){return e.scrollToRef(e.ref_SearchForm)},showBackToTop:this.state.showBackToTop}):null))}}]),t}(r.a.Component),B=n(41),_=n(20),x=n.n(_),F=n(42),A=function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var a=Object(F.a)(x.a.mark(function a(){var r;return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.reloadAuthResponse();case 2:r=a.sent,t=1e3*(r.expires_in||3300),console.log("newAuthRes:",r),localStorage.setItem("authToken",r.id_token),setTimeout(n,t);case 7:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();setTimeout(n,t)},P="466335527908-4o0rgob01n67tmjbji3ck7vgho9sqnjo.apps.googleusercontent.com";var L=function(){var e=Object(s.f)();return r.a.createElement("div",null,r.a.createElement(B.GoogleLogin,{clientId:P,buttonText:"Login",onSuccess:function(t){alert("logged in successfully"),e.push({pathname:"/home",state:{res:t.Lu.tf}}),A(t)},onFailure:function(e){console.log("Login failed: res:",e),alert("Failed to login. \ud83d\ude22 please ping this to shaikfurkhan1998@gmail.com")},cookiePolicy:"single_host_origin",style:{marginTop:"100px",alignSelf:"center"},isSignedIn:!1}))};var q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:L}),r.a.createElement(s.a,{path:"/home",component:N}))))};n(97);l.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.3525020c.chunk.js.map